<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  border: 0;
  font: inherit;
  vertical-align: baseline;
}
body {
  font-family: sans-serif;
  background: #1d1c2b;
  margin: 0;
  color: white;
}
p{
  color: white;
  text-align: justify;
  margin: 20px 0;
  font-size: 1rem;
}
h1 {
  color: white;
  text-align: center;
  margin: 20px 0;
  font-size: 3rem;
  font-weight: bold;
}
h2{
  color: white;
  text-align: center;
  margin: 20px 0;
  font-size: 2rem;
  font-weight: bold;
  transition: 1s;
}
h2:hover {
  cursor: pointer;
  color: #ccc;
  transform: scale(1.2);
  transition: 1s;
}
ul {
  list-style: none;
  padding: 0;
}
li {
  margin: 5px auto;
  font-size: 1.2rem;
}
strong {
  color: white;
  font-weight: bold;
  text-shadow: 1px 1px 2px black;
  font-size: 1.2rem;
}

.container {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

}
a{
  font-family: Arial, Helvetica, sans-serif;
  color: white;
  text-decoration: none;
  font-size: 20px;
  margin-top: 20px;
  transition: 1s;
}
a:hover {
  transition: 1s;
  color: #ccc;
  font-weight: bold;
}
iframe {
  display: none;
}
button {
  background-color: #4CAF50; /* Green */
  border: none;
  font-size: 1.5rem;
  font-weight: bold;
  color: white;
  padding: 20px 5px;
  width: 200px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  cursor: pointer;
  border-radius: 10px;
  transition: 0.3s ease;
    
}
button:hover {
  background-color: #2d6830; /* Darker green on hover */
  color: white;
  transition: 0.3s ease;
  font-weight: bold;
}
.controls {
  transform: translate(0,0);
  background-color: rgba(255, 255, 255, 0.1);
  padding: 10px 60px ;
  border-radius: 5px;
  width: 600px;
}

.IAMode {
  margin: 0 10px;
  width: 40px;
  height: 40px;
  pointer-events: none;
  background: rgba(255, 0, 0, 0.5);
  z-index: 1;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;  
}

.camara {
position: absolute;
top: 15%;
right: 50%;
transform: translate(50%, 0);
width: 420px;
background-color: rgba(29, 28, 43, 0.5);  
padding: 10px;
padding-bottom:1px;
border-radius: 10px;
box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
transition: opacity 0.5s ease;
opacity: 1;
z-index: 10;
}

.texto {
    text-align: center;
    font-size: 1rem;
    color: white;
    margin-bottom: 10px;
    background-color: rgba(29, 28, 43, 0.8);
    border-radius: 10px;
}
  .container2 {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
.abajo {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
}
#canvas {
    border: 1px solid #ccc;
    border-radius: 5%;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    margin: 10px;
}
.btn {
    padding: 17px 20px;
    margin: 5px;
    border: none;
    border-radius: 5px;
    font-size: 1rem;
    background-color: #007bff;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}
.btn:hover {
    background-color: #0056b3;
}
#resultado {
    position: absolute;
    font-size: 2rem;
    top: 75%;
    font-weight: bold;
    color: #000000;
}

/* Notificación de monstruos */
#monsters-notification {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 0, 0, 0.5);
    color: white;
    padding: 20px 30px;
    border-radius: 10px;
    font-size: 1.5rem;
    font-weight: bold;
    text-align: center;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}
</style>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmotionNetV2</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
</head>
<body>
  <div class="container">
    <h1 style="color: white;;">Emotion Express - Beta 1.0 
      <div style="display: flex; justify-content: center; align-items: center;">
      <div style="opacity: 1; display: inline-block;" class="IAMode"> <img style="width: 38px; height: 38px;" src="images/chip-de-ia.png" alt=""></div> 
      <div style="display: inline-block;" class="Level"><h2></h2></div> 
      </div>
    </h1>
    
    <!-- Notificación de monstruos -->
    <div id="monsters-notification">Encara hi ha monstres!</div>
    
    <canvas id="gameCanvas" style="image-rendering: pixelated; position: relative;"></canvas>

    <div class="controls" style="border-radius: 5px 5px 0px 0px;">
      <h2 class="tutorial-title">Tutorial</h2>
      <div style="display: flex; justify-content: space-between;">
        <p class="tutorial-text">En aquest joc, l’objectiu és superar nivells eliminant tots els monstres i, un cop fet, situar-te sobre una porta i prémer la tecla E per avançar. Et desplaces amb les tecles WASD i ataques amb la barra espaiadora. A més, disposes d’una opció especial: en prémer M actives el mode d’IA amb reconeixement facial, que determinarà el pròxim nivell al qual accediràs. Si aquest mode està desactivat, simplement passaràs al següent nivell de manera normal; en canvi, si està actiu, pots prémer C per obrir la càmera i comprovar que la teva cara estigui centrada abans de continuar.</p>
      </div>
    </div>

     <div class="controls" style="border-radius: 0px 0px 5px 5px;">
      <h2 class="controls-title">Controls</h2>
      <div style="display: flex; justify-content: space-between;">
        <ul class="list">
          <li><strong>W</strong>: Moure amunt</li>
          <li><strong>A</strong>: Moure a l'esquerra</li>
          <li><strong>S</strong>: Moure avall</li>
          <li><strong>D</strong>: Moure a la dreta</li>
        </ul>
        <ul class="list">
          <li><strong>Space</strong>: Atacar</li>
          <li><strong>E</strong>: Obrir portes</li>
          <li><strong>C</strong>: Càmera</li>
          <li><strong>M</strong>: Mode IA</li>
        </ul>
      </div>
    </div>

    <div class="camara" style="opacity: 0;">
      <div class="container2 texto">
              <p>Càmera de Reconeixement facial <br> Prem C per a ocultar o mostrar la càmera <br> Procura que la teva cara estigui el més centrada possible.</p>
      </div>
      <div class="container2">
              <video id="video" playsinline autoplay style="width: 1px;"></video>
              <canvas id="canvas" width="400" height="400" style="max-width: 100%; opacity: 1;"></canvas>
      </div>
    </div>

    <button onclick="toggleForm();"><h3>FeedBack</h3></button>
     <canvas id="otrocanvas" width="48" height="48" style="opacity: 0;"></canvas>


    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSd1uPsPX4jqmn_lffquRBR2se6hdL8-3Tg-YpFbjVfpFMDvwg/viewform?embedded=true" width="1024" height="3600" frameborder="0" marginheight="0" marginwidth="0">S&#39;està carregant…</iframe>

  </div>
  <!-- EMOTIONNET -->
  <script src="js/emotionNet.js"></script>
  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js" integrity="sha512-NcZdtrT77bJr4STcmsGAESr06BYGE8woZdSdEgqnpyqac7sugNO+Tr4bGwGF3MsnEkGKhU2KL2xh6Ec+BqsaHA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <!-- LEVEL1 -->
  <script src="./data/l_floor_lvl3.js"></script>
  <script src="./data/l_floor2_lvl3.js"></script>
  <script src="./data/l_walls_lvl3.js"></script>
  <script src="./data/l_deco_lvl3.js"></script>
  <!-- LEVEL 2 -->
  <script src="./data/l_floor_lvl2.js"></script>
  <script src="./data/l_floor2_lvl2.js"></script>
  <script src="./data/l_WALLS_LVL2.js"></script>
  <script src="./data/l_deco_lvl2.js"></script>
  <!-- LEVEL 3 -->
  <script src="./data/l_floor_lvl1.js"></script>
  <script src="./data/l_loor2_lvl1.js"></script>
  <script src="./data/l_walls_lvl1.js"></script>
  <script src="./data/l_deco_lvl1.js"></script>

  <!-- LEVEL 4 -->
  <script src="./data/l_floor_lvl4.js"></script>
  <script src="./data/l_floor2_lvl4.js"></script>
  <script src="./data/l_walls_lvl4.js"></script>
  <script src="./data/l_deco_lvl4.js"></script>

  <!-- LEVEL 5 -->
  <script src="./data/l_floor_lvl5.js"></script>
  <script src="./data/l_floor2_lvl5.js"></script>
  <script src="./data/l_walls_lvl5.js"></script>
  <script src="./data/l_deco_lvl5.js"></script>

  <!-- CLASSES -->  
  <script src="./js/utils.js"></script>
  <script src="./classes/CollisionBlock.js"></script>
  <script src="./classes/heart.js"></script>
  <script src="./classes/door.js"></script>
  <script src="./classes/Monsters/stormhead.js"></script>
  <script src="./classes/Monsters/skeleton.js"></script>
  <script src="./classes/Monsters/bot.js"></script>
  <script src="./classes/Player.js"></script>


  <!-- Feedback Form -->
  <script>
    const forms = document.querySelector('iframe');
    function toggleForm() {
      if (forms.style.display === 'none') {
        forms.style.display = 'block';
      } else {
        forms.style.display = 'none';
      }
    }
  </script>
<!-- IA Mode -->
  <script>
    const IAbox = document.querySelector('.IAMode');
    let IAisOn = false;

    function toggleIAMode() {
      if (IAisOn) {
        IAisOn = false;
        IAbox.style.background = 'rgba(255, 0, 0, 0.5)';
      } else {
        IAisOn = true;
        IAbox.style.background = 'rgba(0, 255, 0, 0.5)';
      }
    }

  </script>
<!-- Controls -->
  <script>
    const Mbox = document.querySelector('.Mbox');
    const list = document.getElementsByClassName('list');
    const tutorial = document.getElementsByClassName('tutorial-text')[0];
    const controls = document.getElementsByClassName('controls')[1];

    controls.style.opacity = '0';

    function toggleControls() {
      if (list[0].style.display === 'none' && list[1].style.display === 'none' && tutorial.style.display === 'none') {

        list[0].style.display = 'block';
        list[1].style.display = 'block';
        tutorial.style.display = 'block';


        controls.style.opacity = '1';
      } else {
        list[0].style.display = 'none';
        list[1].style.display = 'none';
        tutorial.style.display = 'none';

        controls.style.opacity = '0';
      }
    }

    list[0].style.display = 'none';
    list[1].style.display = 'none';
    tutorial.style.display = 'none';

    controls.style.opacity = '0';

    document.querySelector('.tutorial-title').addEventListener('click', toggleControls);
    document.querySelector('.tutorial-title').style.cursor = 'pointer';

    document.querySelector('.controls-title').addEventListener('click', toggleControls);
    document.querySelector('.controls-title').style.cursor = 'pointer';

  </script>
<!-- Indicador de nivell -->
  <script>
    const levelIndicator = document.querySelector('.Level');
    const levelsNames = ['Nivell Neutral', 'Nivell Tristeza', 'Nivell Feliç', 'Nivell Surpresa', 'Nivell Enfadat']

    function updateLevelIndicator(level) {
      levelIndicator.innerHTML = `<h2> ${levelsNames[level - 1] || 'Nivell Desconegut'} </h2>`;
    }

    // Exemple d'ús: Actualitza l'indicador al nivell 1
    updateLevelIndicator(1);
  </script>

  <script src="./js/index.js"></script>
  <script src="./js/eventListeners.js"></script>

</body>
</html>
